<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>湊齊10000元</title>
<style>
  :root {
    --bg: #f9fafb;
    --panel: #ffffff;
    --border: #d1d5db;
    --text: #1e293b;
    --muted: #6b7280;
    --primary: #0071e3;
    --primary-hover: #0062c8;
    --primary-press-top: #0a67c9;
    --primary-press-bottom: #084d98;
    --ok: #16a34a;
    --warn: #f59e0b;
    --err: #dc2626;
    --radius: 12px;
  }

  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
  }

  header { padding: 28px 20px 12px; text-align: center; }
  h1 { font-size: 24px; font-weight: 700; margin: 0; color: var(--text); letter-spacing: -0.3px; }
  .sub { font-size: 14px; color: var(--muted); margin-top: 4px; }

  .card {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
    margin: 20px auto;
    width: min(92%, 520px);
    box-shadow: 0 2px 8px rgba(0,0,0,.04);
  }

  .field { display:flex; flex-direction: column; gap: 6px; margin-bottom: 16px; }
  label { font-weight: 600; font-size: 15px; }
  input[type="number"] {
    width: 100%;
    padding: 12px 14px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    font-size: 16px;
    background: #fff;
    color: var(--text);
    outline: none;
    transition: border .2s ease, box-shadow .2s ease, transform .06s ease;
  }
  input[type="number"]::placeholder { color: #9ca3af; }
  input[type="number"]:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(0,113,227,.15); }
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
  input[type="number"] { -moz-appearance: textfield; }

  .btns { display:flex; flex-direction: column; gap: 12px; margin-top: 8px; }
  button {
    width: 100%;
    padding: 14px 16px;
    border: none;
    border-radius: 14px;
    font-size: 17px;
    font-weight: 600;
    letter-spacing: .3px;
    cursor: pointer;
    transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
  }
  button.primary {
    color: #fff;
    background: linear-gradient(180deg, var(--primary), #066ddc);
    box-shadow: 0 8px 16px rgba(0,113,227,.25), 0 2px 4px rgba(0,0,0,.08);
  }
  button.primary:hover {
    background: linear-gradient(180deg, var(--primary-hover), #065cb8);
    box-shadow: 0 10px 20px rgba(0,113,227,.28), 0 3px 6px rgba(0,0,0,.10);
  }
  button.primary:active {
    background: linear-gradient(180deg, var(--primary-press-top), var(--primary-press-bottom));
    transform: translateY(1px);
    box-shadow: 0 4px 10px rgba(0,0,0,.18) inset, 0 2px 4px rgba(0,0,0,.08);
  }
  button.secondary { background: #f3f4f6; color: var(--text); box-shadow: 0 2px 4px rgba(0,0,0,.04); }
  button.secondary:hover { background: #e5e7eb; }
  button.secondary:active { transform: translateY(1px); box-shadow: 0 1px 2px rgba(0,0,0,.08) inset; }

  .result { margin-top: 24px; display:flex; flex-direction: column; gap: 16px; }
  .status { text-align: center; font-weight: 700; font-size: 17px; }
  .status.ok { color: var(--ok); }
  .status.warn { color: var(--warn); }
  .status.err { color: var(--err); }

  .result-title { font-size: 16px; font-weight: 700; }
  .result-note { color: var(--muted); font-size: 13px; margin-top: -6px; }

  .result-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 12px;
  }
  .coin {
    background: #f9fafb;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 12px;
    text-align: center;
  }
  .coin .denom { font-size: 14px; color: var(--muted); }
  .coin .count {
    margin-top: 4px;
    font-size: 30px;
    font-weight: 800;
    color: var(--primary);
  }

  .panel {
    background: #f9fafb;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 12px 16px;
  }
  .row { display:flex; justify-content: space-between; font-size: 15px; padding: 4px 0; }
  .row .label { color: var(--muted); }
  .row .value { font-weight: 700; }
</style>
</head>
<body>
  <header>
    <h1>湊齊10000元</h1>
    <div class="sub">小面額優先；若無法剛好，顯示最接近 10000 的結果。</div>
  </header>

  <section class="card">
    <div class="field">
      <label for="c1000">1000 元可用數量</label>
      <input id="c1000" type="number" min="0" step="1" placeholder="請輸入數量">
    </div>
    <div class="field">
      <label for="c500">500 元可用數量</label>
      <input id="c500" type="number" min="0" step="1" placeholder="請輸入數量">
    </div>
    <div class="field">
      <label for="c100">100 元可用數量</label>
      <input id="c100" type="number" min="0" step="1" placeholder="請輸入數量">
    </div>
    <div class="field">
      <label for="c50">50 元可用數量</label>
      <input id="c50" type="number" min="0" step="1" placeholder="請輸入數量">
    </div>
    <div class="field">
      <label for="c10">10 元可用數量</label>
      <input id="c10" type="number" min="0" step="1" placeholder="請輸入數量">
    </div>
    <div class="field">
      <label for="c5">5 元可用數量</label>
      <input id="c5" type="number" min="0" step="1" placeholder="請輸入數量">
    </div>
    <div class="field">
      <label for="c1">1 元可用數量</label>
      <input id="c1" type="number" min="0" step="1" placeholder="請輸入數量">
    </div>

    <div class="btns">
      <button id="calcBtn" class="primary">計算</button>
      <button id="resetBtn" class="secondary">清空</button>
    </div>

    <div id="result" class="result"></div>
    <div id="result-end" style="height:1px;"></div>
  </section>

<script>
const TARGET = 10000;

// 讀取輸入
function getInputs() {
  const num = id => {
    const v = document.getElementById(id).value.trim();
    if (v === "") return 0;
    const n = parseInt(v, 10);
    return isNaN(n) ? 0 : Math.max(0, n);
  };
  return {
    1000: num('c1000'),
    500:  num('c500'),
    100:  num('c100'),
    50:   num('c50'),
    10:   num('c10'),
    5:    num('c5'),
    1:    num('c1')
  };
}

// 輸入總金額
function totalInputAmount(avail) {
  return avail[1000]*1000 + avail[500]*500 + avail[100]*100 + avail[50]*50 + avail[10]*10 + avail[5]*5 + avail[1];
}

// 總值
function totalValue(avail) {
  return 1000*avail[1000] + 500*avail[500] + 100*avail[100] + 50*avail[50] + 10*avail[10] + 5*avail[5] + 1*avail[1];
}

// 小面額優先解法（新增5元）
function solveExactForTarget(target, avail) {
  const max1 = Math.min(avail[1], target);
  for (let use1 = max1; use1 >= 0; use1--) {
    let rem1 = target - use1;
    const max5 = Math.min(avail[5], Math.floor(rem1/5));
    for (let use5 = max5; use5 >= 0; use5--) {
      let rem5 = rem1 - use5*5;
      const max10 = Math.min(avail[10], Math.floor(rem5/10));
      for (let use10 = max10; use10 >= 0; use10--) {
        let rem10 = rem5 - use10*10;
        const max50 = Math.min(avail[50], Math.floor(rem10/50));
        for (let use50 = max50; use50 >= 0; use50--) {
          let rem50 = rem10 - use50*50;
          const max100 = Math.min(avail[100], Math.floor(rem50/100));
          for (let use100 = max100; use100 >= 0; use100--) {
            let rem100 = rem50 - use100*100;
            const max500 = Math.min(avail[500], Math.floor(rem100/500));
            for (let use500 = max500; use500 >= 0; use500--) {
              let rem500 = rem100 - use500*500;
              const max1000 = Math.min(avail[1000], Math.floor(rem500/1000));
              for (let use1000 = max1000; use1000 >= 0; use1000--) {
                let sum = 1*use1 + 5*use5 + 10*use10 + 50*use50 + 100*use100 + 500*use500 + 1000*use1000;
                if (sum === target)
                  return {1:use1,5:use5,10:use10,50:use50,100:use100,500:use500,1000:use1000,sum};
              }
            }
          }
        }
      }
    }
  }
  return null;
}

// 找最接近目標
function solveClosest(target, avail) {
  const exact = solveExactForTarget(target, avail);
  if (exact) return exact;
  const total = totalValue(avail);
  let closest = null, minDiff = Infinity;
  for (let t = 0; t <= total; t++) {
    const res = solveExactForTarget(t, avail);
    if (res) {
      const diff = Math.abs(t - target);
      if (diff < minDiff) {
        minDiff = diff; closest = res;
      }
    }
  }
  return closest;
}

function coinBox(label, count) {
  return `<div class="coin"><div class="denom">${label}</div><div class="count">${count}</div></div>`;
}

// 結果呈現
function renderResult(sol, target, avail) {
  const el = document.getElementById('result');
  if (!sol) {
    el.innerHTML = `<div class="status err">無法找到符合條件的組合。</div>`;
    return;
  }
  const diff = sol.sum - target;
  const status = (diff===0)
    ? `<div class="status ok">已剛好湊齊 10000 元</div>`
    : `<div class="status warn">無法剛好 10000，最接近的結果（${diff>0?"超過":"不足"} ${Math.abs(diff)} 元）</div>`;

  const title = `<div class="result-title">數量組合</div>
                 <div class="result-note">下列藍色數字為各面額的「使用數量」。</div>`;
  const grid = `<div class="result-grid">
      ${coinBox("1000 元", sol[1000]||0)}
      ${coinBox("500 元", sol[500]||0)}
      ${coinBox("100 元", sol[100]||0)}
      ${coinBox("50 元", sol[50]||0)}
      ${coinBox("10 元", sol[10]||0)}
      ${coinBox("5 元", sol[5]||0)}
      ${coinBox("1 元", sol[1]||0)}
    </div>`;
  const deltaPanel = `<div class="panel"><div class="row"><div class="label">與 10000 的差</div><div class="value">${diff>0?"+":""}${diff}</div></div></div>`;
  const inputTotal = totalInputAmount(avail).toLocaleString();
  const totalPanel = `<div class="panel"><div class="row"><div class="label">總金額（依輸入數量 × 面額）</div><div class="value">${inputTotal}</div></div></div>`;
  el.innerHTML = status + title + grid + deltaPanel + totalPanel;
}

function scrollToResult() {
  const anchor = document.getElementById('result-end');
  if (anchor) anchor.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

document.getElementById('calcBtn').addEventListener('click', ()=>{
  const avail = getInputs();
  const sol = solveClosest(TARGET, avail);
  renderResult(sol, TARGET, avail);
  requestAnimationFrame(scrollToResult);
});

document.getElementById('resetBtn').addEventListener('click', ()=>{
  for (const id of ['c1000','c500','c100','c50','c10','c5','c1'])
    document.getElementById(id).value='';
  document.getElementById('result').innerHTML='';
  window.scrollTo({ top:0, behavior:'smooth' });
});
</script>
</body>
</html>
